#!/usr/bin/env node

require('coffee-script/register');
require('colors');
var cli = require('../lib/cli'),
    notifier = require('update-notifier')({ packagePath: '../package.json' }),
    args = require('optimist')
            .alias('v', 'version')
            .alias('e', 'env')
            .alias('q', 'quiet')
            .argv

// new version notification
notifier.update && notifier.notify();

// log data and errors to the console
if (!args.quiet) {
  cli.on('err', function(err){ console.error(err); process.exit(1) })
     .on('data', console.log.bind(console))
     .on('inline', process.stdout.write.bind(process.stdout))
}

// pass the arguments to the cli module
cli.execute(args, notifier.packageFile)
  
